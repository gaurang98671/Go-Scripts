<html>
    <head>
        <title>
            Web sockets!!
        </title>
    </head>
    <body>
        <form action="sendMessage()">
            <input type="text" name="message" id="message">
        </form>
        <button onclick="sendMessage()">Click meee</button>
        <ul id="chat"></ul>
    </body>
    <script>
       
        const ws= new WebSocket("ws://localhost:8080/ws")
        console.log("attempting connection")
        ws.onopen= ()=>{
            console.log("Successfully connected")
            ws.send("Hi from client")
        }

        ws.onmessage= (m)=>{
            console.log(m)
        }

        ws.onclose= (event)=>{
            console.log("Connection closed")
        
        }

        ws.onerror= (error)=> {
            console.log("Error: ", error)
        }

        ws.onmessage= function (message){
            var element= document.createElement("li")
            var text= document.createTextNode(message.data)
            element.appendChild(text)
            document.getElementById("chat").appendChild(element)
        }
        function sendMessage()
        {

            ws.send(document.getElementById("message").value)
        }
    </script>
</html>